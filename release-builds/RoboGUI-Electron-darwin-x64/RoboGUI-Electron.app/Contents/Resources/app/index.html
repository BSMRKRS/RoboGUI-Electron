<!DOCTYPE html>
<html>

  <head>
    <meta charset="UTF-8">
    <title>RoboGUI-Electron</title>
  </head>

  <body onload='camera();' text = 'white'>
    <script>
    const electron = require('electron');
    const path = require('path');
    const appPath = (electron.app || electron.remote.app).getPath('userData');
    const ip = appPath+"/ip.js";

    </script>
    <script type="text/javascript" id='ip'></script>
    <script>document.getElementById('ip').src=ip</script>

    <h1>RoboGUI-Electron</h1>

      <input type="submit" value="Run Controller-Support"
      onclick="Controller();"/>

      <input type="submit" value="Install Controller"
      onclick="ControllerInstall();"/>

      <form id='RoboHTML'>
        <input type="submit" value="Robo-HTML" />
      </form>

      <script>document.getElementById('RoboHTML').action=RoboHTML</script>

    <!--<p><img src='http://webcams.hotelcozumel.com.mx:6003/axis-cgi/mjpg/video.cgi?resolution=320x240&dummy=1458771208837'></img></p>-->
    <!--<p><img src='http://192.168.21.113:8080?action=stream'></img></p>-->

    <!-- Set of 18 cameras -->
    <p><img id='stream0'><img id='stream1'><img id='stream2'></p>
    <p><img id='stream3'><img id='stream4'><img id='stream5'></p>
    <p><img id='stream6'><img id='stream7'><img id='stream8'></p>

    <p><img id='stream9'><img id='stream10'><img id='stream11'></p>
    <p><img id='stream12'><img id='stream13'><img id='stream14'></p>
    <p><img id='stream15'><img id='stream16'><img id='stream17'></p>

    <h3>Version</h3>
    RoboGUI v1.0.0 <br />
    Node <script>document.write(process.versions.node)</script>,
    Chrome <script>document.write(process.versions.chrome)</script>,
    and Electron <script>document.write(process.versions.electron)</script>.
  </body>

  <script>
    function Controller(){
      require('child_process').exec("python ~/Library/'Application Support'/robogui-electron/Controller.py " + controller, function (err, stdout, stderr) {
        if (err) {
          return console.log(err);
        }
        console.log(stdout);
      });
    }

    function camera(){
      for (var i in cameras){
        document.getElementById('stream'+i.toString()).src="http://"+cameras[i]+":8080?action=stream&resolution=320x240";
        document.getElementById('stream'+i.toString()).height="240"
        document.getElementById('stream'+i.toString()).width="320"
        console.log(i + ': ' + cameras[i]);
      }
    }

    function ControllerInstall(){
      require('child_process').exec("curl -o ~/Library/'Application Support'/robogui-electron/Controller.py https://raw.githubusercontent.com/avoss19/RoboGUI-Electron/master/Controller.py", function (err, stdout, stderr) {
        if (err) {
          return console.log(err);
        }
        console.log(stdout);
      });
    }

  </script>

</html>
