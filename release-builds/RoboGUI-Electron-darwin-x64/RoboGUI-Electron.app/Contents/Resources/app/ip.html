<!DOCTYPE html>
<html>

<body text='white'>

  <h1>Config IP Addresses</h1>

  <p>* Cameras ips requires quotes & refresh is needed after pressing "Okay"</p>

  <p>Cameras: <input type="text" id='cameraIP' value="'192.168.21.xxx'"></p>
  <p>Controller: <input type="text" id='controllerIP' value="192.168.21.xxx"></p>
  <p>RoboHTML: <input type="text" id='roboHTMLIP' value="192.168.21.xxx"></p>

  <input type="submit" value="Okay"
  onclick="ipSave();"/>

  <input type="submit" value="Cancel"
  onclick="window.close();"/>

  <script>
  const electron = require('electron');
  const path = require('path');
  const appPath = (electron.app || electron.remote.app).getPath('userData');

  function ipSave(){
    var camera = document.getElementById('cameraIP').value
    var controller = document.getElementById('controllerIP').value
    var roboHTML = document.getElementById('roboHTMLIP').value

    if (camera == '') {camera = "''"}
    if (controller == '') {controller = "''"}
    if (roboHTML == '') {roboHTML = ''}

    var fs = require('fs');

    fs.writeFile(appPath+"/ip.js", "cameras = ["+camera+"]\ncontroller = '"+controller+"'\nroboHTML = 'http://"+roboHTML+"'", function(err) {
    if(err) {
        return console.log(err);
    }
    console.log("The file was saved!");
  });

  window.close()
  }
  </script>

</body>

<html>
